# Allwinner H700 quad core 1GB RAM SoC Gaming Handheld with LCD display
BOARD_NAME="Anbernic RG35XX-H"
BOARDFAMILY="sun50iw9"
BOARD_MAINTAINER=""
BOOTCONFIG="h616_defconfig"

BOOTPATCHDIR="v2025-sunxi"
BOOTBRANCH_BOARD="tag:v2025.04"

OVERLAY_PREFIX="sun50i-h616"
BOOT_FDT_FILE="sun50i-h700-anbernic-rg35xx-h.dtb"
BOOT_LOGO="desktop"
KERNEL_TARGET="current,edge"
KERNEL_TEST_TARGET="current"

# Gaming handheld specific packages
PACKAGE_LIST_BOARD="evtest jstest-gtk joystick"

# Enable gaming-specific kernel features
function family_tweaks_bsp__anbernic_rg35xxh() {
	display_alert "$BOARD" "Configuring gaming handheld features" "info"
	
	# Enable joydev and evdev for gaming controls
	echo "joydev" >> "${destination}"/etc/modules
	echo "evdev" >> "${destination}"/etc/modules
	
	# Create udev rules for gaming device permissions
	mkdir -p "${destination}"/etc/udev/rules.d/
	cat > "${destination}"/etc/udev/rules.d/99-gaming-device.rules << 'EOF'
# Gaming device permissions
SUBSYSTEM=="input", GROUP="input", MODE="0664"
KERNEL=="js[0-9]*", GROUP="input", MODE="0664"
KERNEL=="event[0-9]*", GROUP="input", MODE="0664"
EOF
}
